# Todo

## 課題

+ midsmaskの手法に問題がある。最大頻度の塩基でマスクする方法では、ヘテロがホモになってしまう。

## 解決案

+ クオリティの高い塩基のMIDS頻度にしたがって、ランダムにMIDSを付与する。

## 期待する結果

+ クオリティの高い塩基のMIDS頻度にしたがってMIDSが付与されている
+ midsmaskの点変異部分(829番目)で、クオリティの高い塩基のMIDS頻度にしたがってMIDSが付与されている

## テストデータ

```bash

cat << EOF | sort >tmp1.csv
fooa,!!0
foob,!!0
fooc,!00
food,!00
EOF

cat << EOF | sort >tmp2.csv
fooa,M,M,M
foob,M,M,M
fooc,M,S,M
food,M,M,M
EOF

join -t, tmp1.csv tmp2.csv |
  maskMS > tmp_maskMS.csv

cat tmp_maskMS.csv |
  Rscript ./library/03-preprocess/maskMIDS.R

rm tmp1.csv tmp2.csv
#---
sort .DAJIN_temp/sam/barcode31_control.sam > tmp1.sam
sort .DAJIN_temp/midsfilter/barcode31_control.csv > tmp2.csv
set tmp1.sam tmp2.csv
maskMIDS="$(find .DAJIN_temp/ -name "maskMIDS.R")"
cat "$1" |
  fmtPhred |
  join -t, - "$2" |
  maskMS |
  Rscript --vanilla "$maskMIDS"
```